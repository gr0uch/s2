var r=new WeakMap,t=new WeakMap,e=[],n=null,o=Symbol("stackDelimiter"),i=function(){var r=v();return{get:l,set:r,deleteProperty:r}}(),f=function(){var r=v(!0);return{get:l,set:r,deleteProperty:r}}();function u(){for(n=null;e.length;)e.pop()}function a(){for(var r=e.length-1;r>=0&&e.pop()!==o;r-=1);}function l(r,t,o){return e.find((function(e){return e[0]===r&&e[1]===t}))||(e.push([r,t]),n||(n=setTimeout(u,0))),Reflect.get(r,t,o)}function c(r){return r&&"object"==typeof r}function v(t){return function(e,n,o,i){var f=e[n];if(f===o)return!0;if(t&&c(o)){if(c(f))return s(i[n],o),!0;o=p(o,!0)}void 0!==o?Reflect.set(e,n,o,i):Reflect.deleteProperty(e,n);var u,a=r.get(e);if(!a)return!0;for(var l=(u=a[n]||[]).length,v=0;v<l;v+=1){var h=u[v];g(h[0],h[1],h[2])}return!0}}function s(r,t){for(var e in t){var n=t[e],o=r[e];c(n)&&c(o)?s(o,n):r[e]=n}for(var e in r){r[e];t.hasOwnProperty(e)||delete r[e]}}function p(r,t){r||(r={});var e=new Proxy(r,t?f:i);if(t)for(var n in r){var o=r[n];c(o)&&(r[n]=p(o,!0))}return e}function h(r){for(var t in r){var e=r[t];if("function"==typeof e){if(e.isEventListener)continue;g(r,t,e)}}}function g(n,i,f){e.push(o);var u=f.call(n);void 0!==u?n[i]=u:delete n[i];for(var l=e.length-1;l>=0&&"symbol"!=typeof e[l];l-=1){var c=e[l],v=c[0],s=c[1],p=null;t.has(n)||t.set(n,[]);var h=t.get(n);h.includes(v)||h.push(v),r.has(v)||r.set(v,{}),(p=r.get(v))[s]||(p[s]=[]);var g=p[s];g.find((function(r){return r[0]===n&&r[1]===i}))||g.push([n,i,f])}return a()}function d(e){var n=t.get(e);if(n)for(var o=n.length,i=0;i<o;i+=1){var f=n[i],u=r.get(f);for(var a in u)for(var l=u[a],c=l.length-1;c>=0;c-=1){l[c][0]===e&&l.splice(c,1)}}}function y(r,t){return function(e){var n=e[r],o=e[t];return e[r]=function(){return n&&n.call(this),h(this)},e[t]=function(){return o&&o.call(this),d(this)},e}}export{p as observable,p as createSource,y as createComputed};
