var r=new WeakMap,t=new WeakMap,n=[],e=null,o=Symbol("stackDelimiter"),i=Symbol("ref"),u=Symbol("hasUnmounted"),f=function(){var r=h();return{get:v,set:r,deleteProperty:r}}(),a=function(){var r=h(!0);return{get:v,set:r,deleteProperty:r}}();function l(){for(e=null;n.length;)n.pop()}function c(){for(var r=n.length-1;r>=0&&n.pop()!==o;r-=1);}function v(r,t,o){return n.find((function(n){return n[0]===r&&n[1]===t}))||(n.push([r,t]),e||(e=setTimeout(l,0))),Reflect.get(r,t,o)}function s(r){return r&&"object"==typeof r}function h(t){return function(n,e,o,f){var a=n[e];if(a===o)return!0;if(t&&s(o)&&!o[i]){if(s(a)&&!a[i])return p(f[e],o),!0;o=g(o,!0)}void 0!==o?Reflect.set(n,e,o,f):Reflect.deleteProperty(n,e);var l,c=r.get(n);if(!c)return!0;for(var v=(l=c[e]||[]).length,h=0;h<v;h+=1){var d=l[h];if(d){var b=d[0],m=d[1],P=d[2];b[u]||y(b,m,P)}}return!0}}function p(r,t){for(var n in t){var e=t[n],o=r[n];s(e)&&s(o)?p(o,e):r[n]=e}for(var n in r){r[n];t.hasOwnProperty(n)||delete r[n]}}function g(r,t){r||(r={});var n=new Proxy(r,t?a:f);if(t)for(var e in r){var o=r[e];s(o)&&!o[i]&&(r[e]=g(o,!0))}return n}function y(e,i,u){n.push(o);var f=u.call(e),a=[];void 0!==f?e[i]=f:delete e[i],t.set(e,a);for(var l=n.length-1;l>=0&&n[l]!==o;l-=1){var v=n[l],s=v[0],h=v[1],p=null;a.includes(s)||a.push(s),r.has(s)||r.set(s,{}),(p=r.get(s)).hasOwnProperty(h)||(p[h]=[]);var g=p[h];g.some((function(r){return r[0]===e&&r[1]===i}))||g.push([e,i,u])}return c(),f}function d(n){var e=t.get(n);if(e){for(var o=e.length,i=0;i<o;i+=1){var f=e[i],a=r.get(f);for(var l in a)for(var c=a[l],v=c.length-1;v>=0;v-=1){c[v][0]===n&&c.splice(v,1)}}return n[u]=!0}}function b(r,t){return function(n){var e=n[r],o=n[t];return n[r]=function(){if(e&&e.call(this),!arguments.length)for(var r in n){var t=n[r];"function"==typeof t&&t.call(this)}},n[t]=function(){return o&&o.call(this),d(this)},Object.keys(n).forEach((function(r){var t=n[r];if("function"==typeof t){return n[r]=function(){var n=this[r];return n&&n.isEventListener?t.apply(this,arguments):y(this,r,t)}}})),n}}function m(r){return r[i]=!0,r}export{g as observable,g as createSource,b as createComputed,m as ref};
