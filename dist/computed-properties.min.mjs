var t=new WeakMap,r=new WeakMap,e=[],n=null,o=Symbol("stackDelimiter"),i=Symbol("ref"),f=Symbol("hasUnmounted"),u=function(){var t=p();return{get:v,set:t,deleteProperty:t}}(),a=function(){var t=p(!0);return{get:v,set:t,deleteProperty:t}}();function l(){for(n=null;e.length;)e.pop()}function c(){for(var t=e.length-1;t>=0&&e.pop()!==o;t-=1);}function v(t,r,o){return e.find((function(e){return e[0]===t&&e[1]===r}))||(e.push([t,r]),n||(n=setTimeout(l,0))),Reflect.get(t,r,o)}function s(t){return t&&"object"==typeof t}function p(r){return function(e,n,o,u){var a=e[n];if(a===o)return!0;if(r&&s(o)&&!o[i]){if(s(a)&&!a[i])return h(u[n],o),!0;o=y(o,!0)}void 0!==o?Reflect.set(e,n,o,u):Reflect.deleteProperty(e,n);var l,c=t.get(e);if(!c)return!0;for(var v=(l=c[n]||[]).length,p=0;p<v;p+=1){var d=l[p];if(d){var b=d[0],m=d[1],P=d[2];b[f]||g(b,m,P)}}return!0}}function h(t,r){for(var e in r){var n=r[e],o=t[e];s(n)&&s(o)?h(o,n):t[e]=n}for(var e in t){t[e];r.hasOwnProperty(e)||delete t[e]}}function y(t,r){t||(t={});var e=new Proxy(t,r?a:u),n=t[Object.getOwnPropertySymbols(t)[0]];if(r)for(var o in t){var f=t[o];s(f)&&!f[i]&&(t[o]=y(f,!0))}return"function"==typeof n&&n.call(e),e}function g(n,i,f){e.push(o);var u=f.call(n),a=[];void 0!==u?n[i]=u:delete n[i],r.set(n,a);for(var l=e.length-1;l>=0&&e[l]!==o;l-=1){var v=e[l],s=v[0],p=v[1],h=null;a.includes(s)||a.push(s),t.has(s)||t.set(s,{}),(h=t.get(s)).hasOwnProperty(p)||(h[p]=[]);var y=h[p];y.some((function(t){return t[0]===n&&t[1]===i}))||y.push([n,i,f])}return c(),u}function d(e){var n=r.get(e);if(n){for(var o=n.length,i=0;i<o;i+=1){var u=n[i],a=t.get(u);for(var l in a)for(var c=a[l],v=c.length-1;v>=0;v-=1){c[v][0]===e&&c.splice(v,1)}}return e[f]=!0}}function b(t,r){return function(e){var n=e[t],o=e[r];return e[t]=function(){if(n&&n.call(this),!arguments.length)for(var t in e){var r=e[t];"function"==typeof r&&r.call(this)}},e[r]=function(){return o&&o.call(this),d(this)},Object.keys(e).forEach((function(t){var r=e[t];if("function"==typeof r){return e[t]=function(){var e=this[t];return e&&e.isEventListener?r.apply(this,arguments):g(this,t,r)}}})),e}}function m(t){return t[i]=!0,t}export{y as observable,y as createSource,b as createComputed,m as ref};
