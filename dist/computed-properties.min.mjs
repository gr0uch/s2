var e=new WeakMap,t=new WeakMap,n=new WeakMap,r=[],o=null,i=Symbol("stackDelimiter"),f={get:l,set:c,deleteProperty:c};function u(){for(o=null;r.length;)r.pop()}function a(){for(var e=r.length-1;e>=0&&r.pop()!==i;e-=1);}function l(e,t,n){return r.find((function(n){return n[0]===e&&n[1]===t}))||(r.push([e,t]),o||(o=setTimeout(u,0))),Reflect.get(e,t,n)}function c(t,n,r,o){if(t[n]===r)return!0;void 0!==r?Reflect.set(t,n,r,o):Reflect.deleteProperty(t,n);var i,f=e.get(t);if(!f)return!0;for(var u=(i=f[n]||[]).length,a=0;a<u;a+=1){var l=i[a],c=l[0],s=l[1],v=l[2].call(c);c[s]=v}return!0}function s(e){return new Proxy(e||{},f)}function v(n){for(var o in n){var f=n[o];if("function"==typeof f){if(f.isEventListener)continue;r.push(i);var u=f.call(n);void 0!==u&&(n[o]=u);for(var l=r.length-1;l>=0&&"symbol"!=typeof r[l];l-=1){var c=r[l],s=c[0],v=c[1],p=null;t.has(n)||t.set(n,[]),t.get(n).push(s),e.has(s)||e.set(s,{}),(p=e.get(s))[v]||(p[v]=[]),p[v].push([n,o,f])}a()}}}function p(n){var r=t.get(n);if(r)for(var o=r.length,i=0;i<o;i+=1){var f=r[i],u=e.get(f);for(var a in u)for(var l=u[a],c=l.length-1;c>=0;c-=1){l[c][0]===n&&l.splice(c,1)}}}function h(e,t){return function(n){var r=n[e],o=n[t];return n[e]=function(){return r&&r.call(this),v(this)},n[t]=function(){return o&&o.call(this),p(this)},n}}export{s as observable,s as createSource,h as createComputed};
