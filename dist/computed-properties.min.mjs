var e=new WeakMap,t=new WeakMap,r=new WeakMap,n=[],o=null,f=Symbol("stackDelimiter"),i=function(){var e=v();return{get:l,set:e,deleteProperty:e}}(),a=function(){var e=v(!0);return{get:l,set:e,deleteProperty:e}}();function u(){for(o=null;n.length;)n.pop()}function c(){for(var e=n.length-1;e>=0&&n.pop()!==f;e-=1);}function l(e,t,r){return n.find((function(r){return r[0]===e&&r[1]===t}))||(n.push([e,t]),o||(o=setTimeout(u,0))),Reflect.get(e,t,r)}function v(t){return function(r,n,o,f){var i=r[n];if(i===o)return!0;if(t&&i&&o&&"object"==typeof o&&"object"==typeof i)return p(f[n],o),!0;void 0!==o?Reflect.set(r,n,o,f):Reflect.deleteProperty(r,n);var a,u=e.get(r);if(!u)return!0;for(var c=(a=u[n]||[]).length,l=0;l<c;l+=1){var v=a[l],s=v[0],h=v[1],g=v[2].call(s);s[h]=g}return!0}}function p(e,t){for(var r in t){var n=t[r],o=e[r],f=n&&"object"==typeof n;f&&(o&&"object"==typeof o)?p(o,n):e[r]=f?s(n,!0):n}for(var r in e)t.hasOwnProperty(r)||delete e[r]}function s(e,t){e||(e={});var r=new Proxy(e,t?a:i);if(t)for(var n in e){var o=e[n];o&&"object"==typeof o&&(e[n]=s(o,!0))}return r}function h(r){for(var o in r){var i=r[o];if("function"==typeof i){if(i.isEventListener)continue;n.push(f);var a=i.call(r);void 0!==a&&(r[o]=a);for(var u=n.length-1;u>=0&&"symbol"!=typeof n[u];u-=1){var l=n[u],v=l[0],p=l[1],s=null;t.has(r)||t.set(r,[]),t.get(r).push(v),e.has(v)||e.set(v,{}),(s=e.get(v))[p]||(s[p]=[]),s[p].push([r,o,i])}c()}}}function g(r){var n=t.get(r);if(n)for(var o=n.length,f=0;f<o;f+=1){var i=n[f],a=e.get(i);for(var u in a)for(var c=a[u],l=c.length-1;l>=0;l-=1){c[l][0]===r&&c.splice(l,1)}}}function y(e,t){return function(r){var n=r[e],o=r[t];return r[e]=function(){return n&&n.call(this),h(this)},r[t]=function(){return o&&o.call(this),g(this)},r}}export{s as observable,s as createSource,y as createComputed};
