var r=new WeakMap,t=new WeakMap,e=[],n=!1,o=Symbol("stackDelimiter"),f=Symbol("ref"),i=Symbol("hasUnmounted"),u=function(){var r=h();return{get:v,set:r,deleteProperty:r}}(),a=function(){var r=h(!0);return{get:v,set:r,deleteProperty:r}}();function c(){for(;e.length;)e.pop();return n=!1}function l(){for(var r=e.length-1;r>=0&&e.pop()!==o;r-=1);}function v(r,t,f){for(var i=!1,u=e.length-1;u>=0;u-=1){var a=e[u];if(a===o)break;a[0]===r&&a[1]===t&&(i=!0)}return i||(e.push([r,t]),n||(n=!0,queueMicrotask(c))),Reflect.get(r,t,f)}function s(r){return r&&"object"==typeof r}function h(t){return function(e,n,o,u){var a=e[n];if(a===o)return!0;if(t&&s(o)&&!o[f]){if(s(a)&&!a[f])return p(u[n],o),!0;o=y(o,!0)}void 0!==o?Reflect.set(e,n,o,u):Reflect.deleteProperty(e,n);var c,l=r.get(e);if(!l)return!0;for(var v=(c=l[n]||[]).length,h=0;h<v;h+=1){var b=c[h];if(b){var d=b[0],m=b[1],P=b[2];d[i]||g(d,m,P)}}return!0}}function p(r,t){for(var e in t){var n=t[e],o=r[e];s(n)&&s(o)?p(o,n):r[e]=n}for(var e in r){r[e];t.hasOwnProperty(e)||delete r[e]}}function y(r,t){r||(r={});var e=new Proxy(r,t?a:u),n=r[Object.getOwnPropertySymbols(r)[0]];if(t)for(var o in r){var i=r[o];s(i)&&!i[f]&&(r[o]=y(i,!0))}return"function"==typeof n&&n.call(e),e}function g(n,f,i){e.push(o);var u=i.call(n),a=[];void 0!==u?n[f]=u:delete n[f],t.set(n,a);for(var c=e.length-1;c>=0&&e[c]!==o;c-=1){var v=e[c],s=v[0],h=v[1],p=null;a.includes(s)||a.push(s),r.has(s)||r.set(s,{}),(p=r.get(s)).hasOwnProperty(h)||(p[h]=[]);var y=p[h];y.some((function(r){return r[0]===n&&r[1]===f}))||y.push([n,f,i])}return l(),u}function b(e){var n=t.get(e);if(n){for(var o=n.length,f=0;f<o;f+=1){var u=n[f],a=r.get(u);for(var c in a)for(var l=a[c],v=l.length-1;v>=0;v-=1){l[v][0]===e&&l.splice(v,1)}}return e[i]=!0}}function d(r,t){return function(e){var n=e[r],o=e[t];return e[r]=function(){if(n&&n.call(this),!arguments.length)for(var r in e){var t=e[r];"function"==typeof t&&t.call(this)}},e[t]=function(){return o&&o.call(this),b(this)},Object.keys(e).forEach((function(r){var t=e[r];if("function"==typeof t){return e[r]=function(){var e=this[r];return e&&e.isEventListener?t.apply(this,arguments):g(this,r,t)}}})),e}}function m(r){return r[f]=!0,r}export{y as observable,y as createSource,d as createComputed,m as ref};
