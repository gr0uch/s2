var t=new WeakMap,r=new WeakMap,e=[],n=null,o=Symbol("stackDelimiter"),i=function(){var t=v();return{get:l,set:t,deleteProperty:t}}(),f=function(){var t=v(!0);return{get:l,set:t,deleteProperty:t}}();function u(){for(n=null;e.length;)e.pop()}function a(){for(var t=e.length-1;t>=0&&e.pop()!==o;t-=1);}function l(t,r,o){return e.find((function(e){return e[0]===t&&e[1]===r}))||(e.push([t,r]),n||(n=setTimeout(u,0))),Reflect.get(t,r,o)}function c(t){return t&&"object"==typeof t}function v(r){return function(e,n,o,i){var f=e[n];if(f===o)return!0;if(r&&c(o)){if(c(f))return s(i[n],o),!0;o=p(o,!0)}void 0!==o?Reflect.set(e,n,o,i):Reflect.deleteProperty(e,n);var u,a=t.get(e);if(!a)return!0;for(var l=(u=a[n]||[]).length,v=0;v<l;v+=1){var g=u[v];h(g[0],g[1],g[2])}return!0}}function s(t,r){for(var e in r){var n=r[e],o=t[e];c(n)&&c(o)?s(o,n):t[e]=n}for(var e in t){t[e];r.hasOwnProperty(e)||delete t[e]}}function p(t,r){t||(t={});var e=new Proxy(t,r?f:i);if(r)for(var n in t){var o=t[n];c(o)&&(t[n]=p(o,!0))}return e}function h(n,i,f){e.push(o);var u=f.call(n),l=[];void 0!==u?n[i]=u:delete n[i],r.set(n,l);for(var c=e.length-1;c>=0&&"symbol"!=typeof e[c];c-=1){var v=e[c],s=v[0],p=v[1],h=null;l.includes(s)||l.push(s),t.has(s)||t.set(s,{}),(h=t.get(s))[p]||(h[p]=[]);var g=h[p];g.some((function(t){return t[0]===n&&t[1]===i}))||g.push([n,i,f])}return a(),u}function g(e){var n=r.get(e);if(n)for(var o=n.length,i=0;i<o;i+=1){var f=n[i],u=t.get(f);for(var a in u)for(var l=u[a],c=l.length-1;c>=0;c-=1){l[c][0]===e&&l.splice(c,1)}}}function y(t,r){return function(e){var n=e[t],o=e[r];return e[t]=function(){if(n&&n.call(this),!arguments.length)for(var t in e){var r=e[t];"function"==typeof r&&r.call(this)}},e[r]=function(){return o&&o.call(this),g(this)},Object.keys(e).forEach((function(t){var r=e[t];if("function"==typeof r){return e[t]=function(){var e=this[t];return e&&e.isEventListener?r.apply(this,arguments):h(this,t,r)}}})),e}}export{p as observable,p as createSource,y as createComputed};
