var r=new WeakMap,t=new WeakMap,e=[],n=null,o=Symbol("stackDelimiter"),i=Symbol("ref"),f=function(){var r=s();return{get:c,set:r,deleteProperty:r}}(),u=function(){var r=s(!0);return{get:c,set:r,deleteProperty:r}}();function a(){for(n=null;e.length;)e.pop()}function l(){for(var r=e.length-1;r>=0&&e.pop()!==o;r-=1);}function c(r,t,o){return e.find((function(e){return e[0]===r&&e[1]===t}))||(e.push([r,t]),n||(n=setTimeout(a,0))),Reflect.get(r,t,o)}function v(r){return r&&"object"==typeof r}function s(t){return function(e,n,o,f){var u=e[n];if(u===o)return!0;if(t&&v(o)&&!o[i]){if(v(u)&&!u[i])return p(f[n],o),!0;o=h(o,!0)}void 0!==o?Reflect.set(e,n,o,f):Reflect.deleteProperty(e,n);var a,l=r.get(e);if(!l)return!0;for(var c=(a=l[n]||[]).length,s=0;s<c;s+=1){var g=a[s];y(g[0],g[1],g[2])}return!0}}function p(r,t){for(var e in t){var n=t[e],o=r[e];v(n)&&v(o)?p(o,n):r[e]=n}for(var e in r){r[e];t.hasOwnProperty(e)||delete r[e]}}function h(r,t){r||(r={});var e=new Proxy(r,t?u:f);if(t)for(var n in r){var o=r[n];v(o)&&!o[i]&&(r[n]=h(o,!0))}return e}function y(n,i,f){e.push(o);var u=f.call(n),a=[];void 0!==u?n[i]=u:delete n[i],t.set(n,a);for(var c=e.length-1;c>=0&&"symbol"!=typeof e[c];c-=1){var v=e[c],s=v[0],p=v[1],h=null;a.includes(s)||a.push(s),r.has(s)||r.set(s,{}),(h=r.get(s)).hasOwnProperty(p)||(h[p]=[]);var y=h[p];y.some((function(r){return r[0]===n&&r[1]===i}))||y.push([n,i,f])}return l(),u}function g(e){var n=t.get(e);if(n)for(var o=n.length,i=0;i<o;i+=1){var f=n[i],u=r.get(f);for(var a in u)for(var l=u[a],c=l.length-1;c>=0;c-=1){l[c][0]===e&&l.splice(c,1)}}}function d(r,t){return function(e){var n=e[r],o=e[t];return e[r]=function(){if(n&&n.call(this),!arguments.length)for(var r in e){var t=e[r];"function"==typeof t&&t.call(this)}},e[t]=function(){return o&&o.call(this),g(this)},Object.keys(e).forEach((function(r){var t=e[r];if("function"==typeof t){return e[r]=function(){var e=this[r];return e&&e.isEventListener?t.apply(this,arguments):y(this,r,t)}}})),e}}function b(r){return r[i]=!0,r}export{h as observable,h as createSource,d as createComputed,b as ref};
