var r=new WeakMap,t=new WeakMap,e=[],n=null,o=Symbol("stackDelimiter"),i=Symbol("ref"),f=function(){var r=s();return{get:l,set:r,deleteProperty:r}}(),u=function(){var r=s(!0);return{get:l,set:r,deleteProperty:r}}();function a(){for(n=null;e.length;)e.pop()}function c(){for(var r=e.length-1;r>=0&&e.pop()!==o;r-=1);}function l(r,t,o){return e.find((function(e){return e[0]===r&&e[1]===t}))||(e.push([r,t]),n||(n=setTimeout(a,0))),Reflect.get(r,t,o)}function v(r){return r&&"object"==typeof r}function s(t){return function(e,n,o,f){var u=e[n];if(u===o)return!0;if(t&&v(o)&&!o[i]){if(v(u)&&!u[i])return h(f[n],o),!0;o=p(o,!0)}void 0!==o?Reflect.set(e,n,o,f):Reflect.deleteProperty(e,n);var a,c=r.get(e);if(!c)return!0;for(var l=(a=c[n]||[]).length,s=0;s<l;s+=1){var y=a[s];if(y)g(y[0],y[1],y[2])}return!0}}function h(r,t){for(var e in t){var n=t[e],o=r[e];v(n)&&v(o)?h(o,n):r[e]=n}for(var e in r){r[e];t.hasOwnProperty(e)||delete r[e]}}function p(r,t){r||(r={});var e=new Proxy(r,t?u:f);if(t)for(var n in r){var o=r[n];v(o)&&!o[i]&&(r[n]=p(o,!0))}return e}function g(n,i,f){e.push(o);var u=f.call(n),a=[];void 0!==u?n[i]=u:delete n[i],t.set(n,a);for(var l=e.length-1;l>=0&&e[l]!==o;l-=1){var v=e[l],s=v[0],h=v[1],p=null;a.includes(s)||a.push(s),r.has(s)||r.set(s,{}),(p=r.get(s)).hasOwnProperty(h)||(p[h]=[]);var g=p[h];g.some((function(r){return r[0]===n&&r[1]===i}))||g.push([n,i,f])}return c(),u}function y(e){var n=t.get(e);if(n)for(var o=n.length,i=0;i<o;i+=1){var f=n[i],u=r.get(f);for(var a in u)for(var c=u[a],l=c.length-1;l>=0;l-=1){c[l][0]===e&&c.splice(l,1)}}}function d(r,t){return function(e){var n=e[r],o=e[t];return e[r]=function(){if(n&&n.call(this),!arguments.length)for(var r in e){var t=e[r];"function"==typeof t&&t.call(this)}},e[t]=function(){return o&&o.call(this),y(this)},Object.keys(e).forEach((function(r){var t=e[r];if("function"==typeof t){return e[r]=function(){var e=this[r];return e&&e.isEventListener?t.apply(this,arguments):g(this,r,t)}}})),e}}function b(r){return r[i]=!0,r}export{p as observable,p as createSource,d as createComputed,b as ref};
