var r=new WeakMap,t=new WeakMap,e=[],n=!1,o=Symbol("stackDelimiter"),f=Symbol("ref"),i=Symbol("hasUnmounted"),a=Symbol("proxyTarget"),u=function(){var r=p();return{get:s,set:r,deleteProperty:r}}(),c=function(){var r=p(!0);return{get:s,set:r,deleteProperty:r}}();function l(){for(;e.length;)e.pop();return n=!1}function v(){for(var r=e.length-1;r>=0&&e.pop()!==o;r-=1);}function s(r,t,f){if(t===a)return r;for(var i=!1,u=e.length-1;u>=0;u-=1){var c=e[u];if(c===o)break;c[0]===r&&c[1]===t&&(i=!0)}return i||(e.push([r,t]),n||(n=!0,queueMicrotask(l))),Reflect.get(r,t,f)}function h(r){return r&&"object"==typeof r}function p(t){return function(e,n,o,a){var u=e[n];if(u===o)return!0;if(t&&h(o)&&!o[f]){if(h(u)&&!u[f])return g(u,o),!0;o=y(o,!0)}void 0!==o?Reflect.set(e,n,o,a):Reflect.deleteProperty(e,n);var c,l=r.get(e);if(!l)return!0;for(var v=(c=l[n]||[]).length-1;v>=0;v-=1){var s=c[v];if(s){var p=s[0],d=s[1],m=s[2];p[i]||b(p,d,m)}}return!0}}function g(r,t){var e=r[a];for(var n in t){var o=t[n],i=e[n];h(o)&&h(i)&&!i[f]?g(i,o):r[n]=o}for(var n in e){e[n];Object.hasOwn(t,n)||delete r[n]}}function y(r,t){r||(r={});var e=new Proxy(r,t?c:u),n=r[Object.getOwnPropertySymbols(r)[0]];if(t)for(var o in r){var i=r[o];h(i)&&!i[f]&&(r[o]=y(i,!0))}return"function"==typeof n&&n.call(e),e}function b(n,f,i){e.push(o);var a=e.length-1,u=null,c=i.call(n),l=[];void 0!==c?n[f]=c:delete n[f],t.set(n,l);for(var s=e.length-1,h=a+1;h<=s&&e[h]!==o;h+=1)u=h;var p=a+1;for(h=u;h>=p;h-=1){var g=e[h],y=g[0],b=g[1],d=null;l.includes(y)||l.push(y),r.has(y)||r.set(y,{}),d=r.get(y),Object.hasOwn(d,b)||(d[b]=[]);var m=d[b],O=m.findIndex((function(r){return r[0]===n&&r[1]===f}));-1!==O&&m.splice(O,1),m.push([n,f,i])}return v(),c}function d(e){var n=t.get(e);if(n){for(var o=n.length,f=0;f<o;f+=1){var a=n[f],u=r.get(a);for(var c in u)for(var l=u[c],v=l.length-1;v>=0;v-=1){l[v][0]===e&&l.splice(v,1)}}return e[i]=!0}}function m(r,t){return function(e){var n=e[r],o=e[t];return e[r]=function(){if(n&&n.call(this),!arguments.length)for(var r in e){var t=e[r];"function"==typeof t&&t.call(this)}},e[t]=function(){return o&&o.call(this),d(this)},Object.keys(e).forEach((function(r){var t=e[r];if("function"==typeof t){return e[r]=function(){var e=this[r];return e&&e.isEventListener?t.apply(this,arguments):b(this,r,t)}}})),e}}function O(r){return r[f]=!0,r}export{y as observable,y as createSource,m as createComputed,O as ref};
