var r=new WeakMap,n=new WeakMap,e=new WeakMap,t=[],o=null,a=Symbol("stackDelimiter"),i=function(){var r=h();return{get:v,set:r,deleteProperty:r}}(),f=function(){var r=h(!0);return{get:v,set:r,deleteProperty:r}}();function u(){for(o=null;t.length;)t.pop()}function l(){for(var r=t.length-1;r>=0&&t.pop()!==a;r-=1);}function v(r,n,e){return t.find((function(e){return e[0]===r&&e[1]===n}))||(t.push([r,n]),o||(o=setTimeout(u,0))),Reflect.get(r,n,e)}function c(r){throw new Error('Can not upgrade "'+r+'" to an observable.')}function s(r){throw new Error('Can not downgrade "'+r+'" from an observable.')}function p(r){return r&&"object"==typeof r}function h(n){return function(e,t,o,a){var i=e[t];if(i===o)return!0;if(n){if(p(o)){if(p(i))return g(a[t],o),!0;c(t)}void 0===o&&p(i)&&s(t)}void 0!==o?Reflect.set(e,t,o,a):Reflect.deleteProperty(e,t);var f,u=r.get(e);if(!u)return!0;for(var l=(f=u[t]||[]).length,v=0;v<l;v+=1){var h=f[v],d=h[0],w=h[1],y=h[2].call(d);d[w]=y}return!0}}function g(r,n){for(var e in n){var t=n[e],o=r[e];p(t)&&p(o)?g(o,t):p(t)?c(e):r[e]=t}for(var e in r){var a=r[e];n.hasOwnProperty(e)||(p(a)&&s(e),delete r[e])}}function d(r,n){r||(r={});var e=new Proxy(r,n?f:i);if(n)for(var t in r){var o=r[t];p(o)&&(r[t]=d(o,!0))}return e}function w(e){for(var o in e){var i=e[o];if("function"==typeof i){if(i.isEventListener)continue;t.push(a);var f=i.call(e);void 0!==f&&(e[o]=f);for(var u=t.length-1;u>=0&&"symbol"!=typeof t[u];u-=1){var v=t[u],c=v[0],s=v[1],p=null;n.has(e)||n.set(e,[]),n.get(e).push(c),r.has(c)||r.set(c,{}),(p=r.get(c))[s]||(p[s]=[]),p[s].push([e,o,i])}l()}}}function y(e){var t=n.get(e);if(t)for(var o=t.length,a=0;a<o;a+=1){var i=t[a],f=r.get(i);for(var u in f)for(var l=f[u],v=l.length-1;v>=0;v-=1){l[v][0]===e&&l.splice(v,1)}}}function b(r,n){return function(e){var t=e[r],o=e[n];return e[r]=function(){return t&&t.call(this),w(this)},e[n]=function(){return o&&o.call(this),y(this)},e}}export{d as observable,d as createSource,b as createComputed};
