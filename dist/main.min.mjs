var e;if(void 0===t)var t="slot";if(void 0===r)var r="text";if(void 0===n)var n="html";if(void 0===i)var i="value";if(void 0===a)var a="class";if(void 0===o)var o="attribute";if(void 0===f)var f="data";if(void 0===v)var v="event";if(void 0===l)var l=Symbol("mount");if(void 0===s)var s=Symbol("unmount");if(void 0===u)var u=Symbol("move");if(void 0===d)var d="SLOT";if(void 0===c)var c=new WeakMap;if(void 0===g)var g=new WeakMap;if(void 0===p)var p=new WeakMap;if(void 0===m)var m=new WeakMap;if(void 0===h)var h=new WeakMap;if(void 0===y)var y=new WeakMap;if(void 0===b)var b=new WeakMap;if(void 0===N)var N=new WeakMap;if(void 0===x)var x=new WeakMap;if(void 0===S)var S=new WeakMap;if(void 0===k)var k={set:E,deleteProperty:E};if(void 0===w)var w={set:B,deleteProperty:B};if(void 0===A)var A=[];if(void 0===M)var M={};if(void 0===L)var L={};function B(t,r,n,i,a){if(J.isDeferred&&!a)return W((function(){return e=[],B(t,r,n,i,!0)})),e=[],!0;J.debug&&console.log("setIndex",arguments);var o=Number.parseInt(r,10),f=!Number.isNaN(o),v=void 0!==n;if("length"===r)for(var l=t.length-1,s=n;s<=l;s+=1){var u=t[s],d=y.get(u),c=m.get(u);d&&D(d[0],d[1],c,u),delete t[s]}if(!v&&t[r]){var g=t[r],p=y.get(g),x=m.get(g);D(p[0],p[1],x,g),delete t[r]}if(v){if(!f)return e=[],Reflect.set(t,r,n,i);if(!t.includes(n)){var S=N.get(i),k=S.parentNode,w=b.get(i),A=_(n,w),M=A[0],L=A[1],E=t[r],C=null,T=t.length-1;for(s=o+1;s<=T&&!(C=t[s]);s+=1);if(E&&!t.find((function(e,t){return e===E&&t!==o}))){var R=y.get(E),P=m.get(E);D(R[0],R[1],P,M)}if(C){var j=y.get(C)[0];k.insertBefore(L,j)}else{var H=y.get(i)[1];k.insertBefore(L,H)}return e=[],Reflect.set(t,r,M,i)}var q=t.findIndex((function(e,t){return e===n&&t!==o})),F=t[r],I=h.get(n),O=y.get(n),z=O[0],G=O[1];if(F){var K=y.get(F),Q=K[0],U=K[1],V=h.get(F),X=O[1].nextSibling,Y=X.parentNode;if(n!==F){if(I)for(var Z=z.nextSibling;!Z.isSameNode(G);){var $=Z;Z=Z.nextSibling,I.call(n,$)}if(V)for(var ee=Q.nextSibling;!ee.isSameNode(U);){var te=ee;ee=ee.nextSibling,V.call(F,te)}for(var re=z;!re.isSameNode(G);){var ne=re;re=re.nextSibling,Y.insertBefore(ne,Q)}Y.insertBefore(G,Q);for(var ie=Q;!ie.isSameNode(U);){var ae=ie;ie=ie.nextSibling,Y.insertBefore(ae,X)}Y.insertBefore(U,X)}}else if(I)for(var oe=z.nextSibling;!oe.isSameNode(G);){var fe=oe;oe=oe.nextSibling,I.call(n,fe)}~q&&Reflect.set(t,q,F,i),Reflect.set(t,r,n,i)}return e=[],!0}function W(t){return A.length||requestAnimationFrame((function(){for(var t=A.length;A.length;){A.shift()()}return e=[],J.debug?console.log("queue flushed",t):null})),e=[],A.push(t)}function E(r,n,a,o,f){if(J.isDeferred&&!f)return W((function(){return e=[],E(r,n,a,o,!0)})),e=[],!0;J.debug&&console.log("setProperty",arguments);var l=c.get(r),s=void 0!==a,u=r[n]!==a,d=l[n],g=null,p=null;if(d)for(var m=d.length,h=0;h<m;h+=1){var y=d[h];if(g=y.node,p=y.type,u||f)if(p in L&&"function"!=typeof a)L[p](g,y.name,a);else if(p===v&&H(r,a,y,o),p===t){var b=j(r,n,a,y,f);if(b)return e=[],Reflect.set(r,n,b,o)}p!==i||y.isListening||(g.addEventListener("input",(function(e){return Reflect.set(r,n,e.target.value,o)})),y.isListening=!0)}return s?Reflect.set(r,n,a,o):delete r[n],e=[],!0}function C(e,t,r){return null!=r?t in e?e[t]=r:e.setAttribute(t,r):e.removeAttribute(t)}function T(e,t,r){return null!=r?e.dataset[t]=r:delete e.dataset[t]}function R(e,t,r){return r?e.className=Array.isArray(r)?r.split(" "):r:e.removeAttribute("class")}function D(t,r,n,i){var a=t,o=a;for(a=a.nextSibling,o.remove();!a.isSameNode(r);)!function(){var e=a;a=a.nextSibling,n?Promise.resolve(n.call(i,e)).then((function(){return e.remove()})):e.remove()}();return r.remove(),e=[],P(i)}function P(t,r){for(var n in t){var i=t[n];"object"==typeof i&&null!==i&&P(i,!0)}if(r){var a=m.get(t);return e=[],a?a.call(t):null}}function j(t,r,n,i,a){if(J.debug&&console.log("setSlot",arguments),(t[r]||n||a)&&(void 0===n||"object"==typeof n)){var o=i.node,f=i.slot,v=i.template,l=p.get(t),s=l[r],u=o.parentNode,d=z(0,r),c=z(1,r),g=t[r],h=Array.isArray(g),b=g&&"object"==typeof g,x=Array.isArray(n),S=h!==x,k=null;if(s&&(!n||n&&!g||S)){if(Array.isArray(g))for(var w=g.length,A=0;A<w;A+=1){var M=g[A],L=m.get(M),B=y.get(M);B&&D(B[0],B[1],L,M)}else if(g){var W=m.get(g),E=y.get(g);D(E[0],E[1],W,g)}n&&!g?D(s[0],s[1]):(s[0].remove(),s[1].remove())}if(l[r]=[d,c],u.insertBefore(d,o),n)if(g&&b&&!S){for(var C=h?g:[g],T=x?n:[n],R=T.length-1,P=0;P<=R;P+=1){var j=C[P],H=T[P];if(j){for(var r in H)j[r]=H[r];for(var r in j)r in H||delete j[r]}else C[P]=H}Array.isArray(g)&&(C.length=T.length),k=g}else if(Array.isArray(n)){for(var q=O(n,v),F=q[0],I=q[1],G=F.length,K=0;K<G;K+=1){var Q=F[K];u.insertBefore(Q,o)}N.set(I,o),y.set(I,l[r]),k=I}else{var U=_(n,v),V=U[0],X=U[1];u.insertBefore(X,o),k=V}else for(var Y=f.childNodes,Z=Y.length,$=0;$<Z;$+=1){var ee=Y[$];u.insertBefore(ee.cloneNode(!0),o)}return u.insertBefore(c,o),e=[],k}}function H(e,t,r,n){var i=r.node,a=r.event,o=g.get(e),f=o[a];if(f&&i.removeEventListener(a,f,f.options),t){t.isEventListener=!0;var v=t.bind(n);return v.options=t.options,i.addEventListener(a,v,v.options),o[a]=v}}function q(l){var s=(l.content||l).cloneNode(!0),u={};return function e(l,s){for(var c=l.childNodes.length-1,g=0;g<=c;g+=1){var p=l.childNodes[g];if(p.nodeType===Node.ELEMENT_NODE)if(p.tagName===d||p.dataset.key){var m=p.dataset.key||p.name,h=z(2,m),y=p.dataset.template,b=y?M[y]||document.querySelector(y):p;if(void 0===m)throw new TypeError("Missing `name` or `data-key` for slot.");if(delete p.dataset.key,!y&&p.tagName===d){b=document.createDocumentFragment();for(var N=p.childNodes,x=N.length,S=0;S<x;S+=1){var k=N[S];b.appendChild(k)}}l.insertBefore(h,p),m in u||(u[m]=[]),u[m].push({path:s.concat(g),slot:y?p:document.createElement("div"),template:b,type:t}),p.remove()}else for(var w in p.children.length&&e(p,s.concat(g)),p.dataset){var A=p.dataset[w],L=null;switch(w){case"text":L={type:r};break;case"value":L={type:i};break;case"class":L={type:a};break;case"unsafeHtml":L={type:n}}w.startsWith("attribute")&&(L={type:o,name:w.slice(9).toLowerCase()}),w.startsWith("event")&&(L={type:v,event:w.slice(5).toLowerCase()}),L||(L={type:f,name:w},A||(A=w)),L&&(delete p.dataset[w],p.removeAttribute(w),L.path=s.concat(g),A in u||(u[A]=[]),u[A].push(L))}}}(s,[]),x.set(l,s),e=[],S.set(l,u)}function F(t,r){var n=S.get(r),i={};for(var a in n){i[a]=[];for(var o=n[a],f=o.length,v=0;v<f;v+=1){var l=o[v],s=I(t,l.path);i[a].push(Object.assign({node:s},l))}}return e=[],i}function I(e,t){for(var r=e,n=t.length-1,i=0;i<=n;i+=1){var a=t[i];r=r.childNodes[a]}return r}function O(t,r){for(var n,i=[],a=[],o=t.length,f=0;f<o;f+=1){var v=_(t[f],r);a.push(v[0]),i.push(v[1])}return n=new Proxy(a,w),b.set(n,r),e=[],[i,n]}function _(t,r){x.get(r)||q(r);var n=x.get(r).cloneNode(!0),i={},a=new Proxy(i,k),o=F(n,r),f=z(0,"proxy"),v=z(1,"proxy"),d=[f,v],b=t[l],N=t[s],S=t[u],w=document.createDocumentFragment();for(var A in N&&m.set(a,N),S&&h.set(a,S),c.set(i,o),g.set(i,{}),p.set(i,{}),t)A in o||(i[A]=t[A]);for(var A in o)E(i,A,t[A],a,!0);return b&&b.call(a,n),w.appendChild(f),w.appendChild(n),w.appendChild(v),y.set(a,d),e=[],[a,w]}function z(e,t){if(J.debug){var r=(0===e?"start":1===e?"end":"anchor")+" "+t;return document.createComment(r)}return document.createTextNode("")}function G(e,t){if("string"==typeof t){var r=document.createElement("template");r.innerHTML=t,t=r}return M[e]=t}function J(t,r){return e=[],_(t,r)}L[r]=function(e,t,r){return r!==e.textContent?e.textContent=r:null},L[n]=function(e,t,r){return r!==e.innerHTML?e.innerHTML=r:null},L[i]=function(e,t,r){if(r!==e.value)return e.value=void 0===r?"":r},L[a]=R,L[o]=C,L[f]=T,J.debug=!1,J.isDeferred=!1;export{l as mount,s as unmount,u as move,G as registerTemplate};export default J;
