var e="{{",t="}}",n=new RegExp(e+"!(.+?)"+t,"gs"),a=new RegExp("^"+e+"([^{}]+?)"+t+"$"),r=new RegExp("("+e+"{1,2}(?:.+?)"+t+"{1,2})","gm"),o=new RegExp("^"+e+"[{&]([^{}]+?)}?"+t+"$"),i=new RegExp(e+"#([^{}]+?)"+t),d=new RegExp(e+"/([^{}]+?)"+t),s=new RegExp(e+"(?:>|&gt;)([^{}]+?)"+t);function l(e){for(var t=function(){for(var t=e.attributes,n=t.length,a=[],r=0;r<n;r+=1){var o=t[r];a.push([o.name,o.value])}return a}(),n=t.length,l=0;l<n;l+=1){var u,c=t[l],f=c[0],w=c[1].match(a),h=0;w&&(u=w[1].trim(),"class"===f&&(e.dataset.class=u,h=1),"value"===f&&(e.dataset.value=u,h=1),f.startsWith("on")&&(e.setAttribute("data-event-"+f.slice(2),u),h=1),f.startsWith("data-")&&(e.setAttribute(f,u),h=2),h||e.setAttribute("data-attribute-"+f,u),2!==h&&e.removeAttribute(f))}if(e.firstChild&&e.firstChild.nodeType===m.window.Node.TEXT_NODE){e.firstChild.nodeValue.trim();var p=e.textContent.match(a),v=e.textContent.match(o);p&&(e.dataset.text=p[1],e.textContent=""),v&&(e.dataset.unsafeHtml=v[1],e.textContent="")}for(var g=Array.prototype.slice.call(e.childNodes),x=[],E=[],N=g.length,T=0;T<N;T+=1){var C=g[T];if(C.nodeType===m.window.Node.TEXT_NODE){for(var b=C.nodeValue.split(r).filter((function(e){return e.trim()})),R=b.length,A=0;A<R;A+=1){var y=b[A],H=null,B=y.match(i),L=y.match(d),M=y.match(s),V=y.match(a),D=y.match(o);if(B){H=m.window.document.createElement("slot");var I=B[1].trim();E.unshift(I),H.setAttribute("name",I),x.length?x[0].appendChild(H):C.parentNode.insertBefore(H,C),x.unshift(H)}else M&&x.length?x[0].dataset.template=M[1].trim():L&&L[1].trim()===E[0]?(E.shift(),x.shift()):V?((H=m.window.document.createElement("span")).dataset.text=V[1],C.parentNode.insertBefore(H,C)):D?((H=m.window.document.createElement("span")).dataset.unsafeHtml=D[1],C.parentNode.insertBefore(H,C)):(H=m.window.document.createTextNode(y),C.parentNode.insertBefore(H,C))}C.remove()}else x.length&&x[0].appendChild(C)}}function m(e){if("string"==typeof e){var t=m.window.document.createElement("template");t.innerHTML=e,e=t}e.innerHTML=e.innerHTML.replace(n,"");for(var a=e.content,r=m.window.document.createNodeIterator(a,4),o=m.window.document.createNodeIterator(a,1),i=null;i=r.nextNode();){i.nodeValue.trim()||i.remove()}for(;i=o.nextNode();)l(i);return e}m.window=window;export default m;
