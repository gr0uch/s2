<!DOCTYPE html>
<meta charset="utf-8">
<title>s2 sandbox</title>
<script type="module">
import s2, { mount, unmount } from "../dist/main.mjs";
import { createComputed, observable } from "../dist/computed-properties.mjs";

const computed = createComputed(mount, unmount);

const s = observable({
  thing1: 1,
  thing2: 1,
  n: {
    v: "a",
  },
}, true);

window.s = s;

// computed({
//   calcThing() {
//     s.thing3 = s.thing1 + s.thing2;
//   }
// })[mount]();

const template = document.querySelector("#root");
const [reactiveObject, node] = s2(computed({
    add(event) {
        event.preventDefault();
        for (let i = 0; i < 1000; i++) {
            this.things.push({ asdf: "asdf" });
        }
    },
    remove(event) {
        event.preventDefault();
        this.things.pop();
    },
    update(event) {
        event.preventDefault();
        for (let i = 0; i < this.things.length; i++) {
            this.things[i].asdf = "jkl";
        }
    },
    clear(event) {
        event.preventDefault();
        this.things = [];
    },
    things: [],
    reader() {
      return s.n?.v;
    },
}), template);

document.body.appendChild(node);
</script>

<template id="root">
  <button data-event-click="add">add</button>
  <button data-event-click="remove">remove</button>
  <button data-event-click="update">update</button>
  <button data-event-click="clear">clear</button>
  <slot name="things">
    <div data-text="asdf"></div>
  </slot>
  <div data-text="reader"></div>
</template>
