var e="{{",t="}}",n=new RegExp(e+"!(.+?)"+t,"gs"),r=new RegExp("^"+e+"([^{}]+?)"+t+"$"),a=new RegExp("("+e+"{1,2}(?:.+?)"+t+"{1,2})","gm"),o=new RegExp("^"+e+"[{&]([^{}]+?)}?"+t+"$"),d=new RegExp(e+"#([^{}]+?)"+t),i=new RegExp(e+"/([^{}]+?)"+t),l=new RegExp(e+">([^{}]+?)"+t);function s(e){for(var t=function(){for(var t=e.attributes,n=t.length,r=[],a=0;a<n;a+=1){var o=t[a];r.push([o.name,o.value])}return r}(),n=t.length,s=0;s<n;s+=1){var u,c=t[s],m=c[0],h=c[1].match(r),f=0;h&&(u=h[1].trim(),"class"===m&&(e.dataset.class=u,f=1),"value"===m&&(e.dataset.value=u,f=1),m.startsWith("on")&&(e.setAttribute("data-event-"+m.slice(2),u),f=1),m.startsWith("data-")&&(e.setAttribute(m,u),f=2),f||e.setAttribute("data-attribute-"+m,u),2!==f&&e.removeAttribute(m))}if(e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE){e.childNodes[0].nodeValue.trim();var p=e.textContent.match(r),v=e.textContent.match(o);p&&(e.dataset.text=p[1],e.textContent=""),v&&(e.dataset.unsafeHtml=v[1],e.textContent="")}for(var N=function(){for(var t=e.childNodes,n=t.length,r=[],a=0;a<n;a+=1){var o=t[a];r.push(o)}return r}(),g=[],E=[],x=N.length,T=0;T<x;T+=1){var b=N[T];if(b.nodeType===Node.TEXT_NODE){for(var w=b.nodeValue.split(a).filter((function(e){return e.trim()})),H=w.length,R=0;R<H;R+=1){var C=w[R],A=null,B=C.match(d),L=C.match(i),M=C.match(l),O=C.match(r),W=C.match(o);if(B){A=document.createElement("slot");var _=B[1].trim();E.unshift(_),A.setAttribute("name",_),g.length?g[0].appendChild(A):b.parentNode.insertBefore(A,b),g.unshift(A)}else M&&g.length?g[0].dataset.template=M[1].trim():L&&L[1].trim()===E[0]?(E.shift(),g.shift()):O?((A=document.createElement("span")).dataset.text=O[1],b.parentNode.insertBefore(A,b)):W?((A=document.createElement("span")).dataset.unsafeHtml=W[1],b.parentNode.insertBefore(A,b)):(A=document.createTextNode(C),b.parentNode.insertBefore(A,b))}b.remove()}else g.length&&g[0].appendChild(b)}}function u(e){if("string"==typeof e){var t=document.createElement("template");t.innerHTML=e,e=t}e.innerHTML=e.innerHTML.replace(n,"");for(var r=e.content,a=document.createNodeIterator(r,NodeFilter.SHOW_TEXT),o=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT),d=null;d=a.nextNode();){d.nodeValue.trim()||d.remove()}for(;d=o.nextNode();)s(d);return e}export default u;
