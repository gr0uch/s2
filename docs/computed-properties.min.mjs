var e=new WeakMap,t=new WeakMap,n=new WeakMap,r=[],o=null,i=Symbol("stackDelimiter"),a={get:u,set:c,deleteProperty:c};function f(){for(o=null;r.length;)r.pop()}function l(){for(var e=r.length-1;e>=0&&r.pop()!==i;e-=1);}function u(e,t,n){return r.push([e,t]),o||(o=setTimeout(f,0)),Reflect.get(e,t,n)}function c(t,n,r,o){if(t[n]===r)return!0;void 0!==r?Reflect.set(t,n,r,o):Reflect.deleteProperty(t,n);var i,a=e.get(t);if(!a)return!0;for(var f=(i=a[n]||[]).length,l=0;l<f;l+=1){var u=i[l],c=u[0],s=u[1],v=u[2].call(c);c[s]=v}return!0}function s(e){return new Proxy(e||{},a)}function v(n){for(var o in n){var a=n[o];if("function"==typeof a){if(a.isEventListener)continue;r.push(i);var f=a.call(n);void 0!==f&&(n[o]=f);for(var u=r.length-1;u>=0&&"symbol"!=typeof r[u];u-=1){var c=r[u],s=c[0],v=c[1],p=null;t.has(n)||t.set(n,[]),t.get(n).push(s),e.has(s)||e.set(s,{}),(p=e.get(s))[v]||(p[v]=[]),p[v].push([n,o,a])}l()}}}function p(n){var r=t.get(n);if(r)for(var o=r.length,i=0;i<o;i+=1){var a=r[i],f=e.get(a);for(var l in f)for(var u=f[l],c=u.length-1;c>=0;c-=1){u[c][0]===n&&u.splice(c,1)}}}function h(e,t){return function(n){var r=n[e],o=n[t];return n[e]=function(){return r&&r.call(this),v(this)},n[t]=function(){return o&&o.call(this),p(this)},n}}export{s as observable,s as createSource,h as createComputed};
